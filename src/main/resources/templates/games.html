<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title th:text="${pageTitle}">Games Calendar</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">-->
<!--    <link rel="stylesheet" href="/css/index_map.css">-->
<!--    <link rel="stylesheet" href="/css/index_navbar.css">-->
<!--    <style>-->
<!--        .filter-section {-->
<!--            background-color: #f8f9fa;-->
<!--            border-radius: 10px;-->
<!--            padding: 20px;-->
<!--            margin-bottom: 20px;-->
<!--        }-->
<!--        .result-win { background-color: #28a745 !important; }-->
<!--        .result-lose { background-color: #dc3545 !important; }-->
<!--        .result-draw { background-color: #6c757d !important; }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--&lt;!&ndash; Navbar &ndash;&gt;-->
<!--<nav class="navbar navbar-expand-lg navbar-light bg-dark shadow-sm">-->
<!--    <div class="container">-->
<!--        <a class="navbar-brand d-flex align-items-center fw-bold text-primary" href="/">-->
<!--            <img src="/images/logos/pl-logo-dark.svg" alt="Football Stats Logo" class="me-2">-->
<!--            <span th:text="${seasonName}">Premier League</span>-->
<!--        </a>-->
<!--        <div class="navbar-nav ms-auto">-->
<!--            <a class="nav-link" href="/action"><i class="fas fa-plus me-1"></i>Player Action</a>-->
<!--            <a class="nav-link" href="/players/statistics"><i class="fas fa-chart-bar me-1"></i>Players Statistics</a>-->
<!--            <a class="nav-link" href="/games"><i class="fas fa-futbol me-1"></i>Games Management</a>-->
<!--            <a class="nav-link" href="/games/add"><i class="fas fa-plus me-1"></i>Game</a>-->
<!--            <a class="nav-link" href="/league"><i class="fas fa-trophy me-1"></i>League Table</a>-->
<!--            <a class="nav-link" href="/cities"><i class="fas fa-map-marked-alt me-1"></i>Premier League Map</a>-->
<!--        </div>-->
<!--    </div>-->
<!--</nav>-->

<!--<div class="container mt-4">-->
<!--    <h1 class="mb-4" th:text="${pageTitle}">Games Management</h1>-->

<!--    &lt;!&ndash; Stats Cards &ndash;&gt;-->
<!--    <div class="row mb-4">-->
<!--        <div class="col-md-6">-->
<!--            <div class="card text-white bg-success">-->
<!--                <div class="card-body">-->
<!--                    <h5 class="card-title">Finished Games</h5>-->
<!--                    <p class="card-text display-4" th:text="${finishedCount}">0</p>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--        <div class="col-md-6">-->
<!--            <div class="card text-white bg-info">-->
<!--                <div class="card-body">-->
<!--                    <h5 class="card-title">Scheduled Games</h5>-->
<!--                    <p class="card-text display-4" th:text="${scheduledCount}">0</p>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Enhanced Filter Section &ndash;&gt;-->
<!--    <div class="filter-section">-->
<!--        <h5 class="mb-3"><i class="fas fa-filter me-2"></i>Filter & Search Games</h5>-->
<!--        <form method="get" action="/games" id="filterForm">-->
<!--            <div class="row g-3">-->
<!--                &lt;!&ndash; Status Filter &ndash;&gt;-->
<!--                <div class="col-md-2">-->
<!--                    <label for="status" class="form-label">Status</label>-->
<!--                    <select class="form-select" id="status" name="status" onchange="applyFilters()">-->
<!--                        <option value="" th:selected="${param.status == null or param.status[0] == ''}">All</option>-->
<!--                        <option value="SCHEDULED" th:selected="${param.status != null and param.status[0] == 'SCHEDULED'}">Scheduled</option>-->
<!--                        <option value="FINISHED" th:selected="${param.status != null and param.status[0] == 'FINISHED'}">Finished</option>-->
<!--                    </select>-->
<!--                </div>-->

<!--                &lt;!&ndash; Club Filter &ndash;&gt;-->
<!--                <div class="col-md-3">-->
<!--                    <label for="clubId" class="form-label">Club</label>-->
<!--                    <select class="form-select" id="clubId" name="clubId" onchange="applyFilters()">-->
<!--                        <option value="" th:selected="${param.clubId == null or param.clubId[0] == ''}">All Clubs</option>-->
<!--                        <option th:each="club : ${clubs}"-->
<!--                                th:value="${club.id}"-->
<!--                                th:text="${club.name}"-->
<!--                                th:selected="${param.clubId != null and param.clubId[0] == club.id.toString()}">-->
<!--                        </option>-->
<!--                    </select>-->
<!--                </div>-->

<!--                &lt;!&ndash; Match Day Filter &ndash;&gt;-->
<!--                <div class="col-md-2">-->
<!--                    <label for="matchDay" class="form-label">Match Day</label>-->
<!--                    <select class="form-select" id="matchDay" name="matchDay" onchange="applyFilters()">-->
<!--                        <option value="" th:selected="${param.matchDay == null or param.matchDay[0] == ''}">All</option>-->
<!--                        <option th:each="day : ${#numbers.sequence(1, 38)}"-->
<!--                                th:value="${day}"-->
<!--                                th:text="'Day ' + ${day}"-->
<!--                                th:selected="${param.matchDay != null and param.matchDay[0] == day.toString()}">-->
<!--                        </option>-->
<!--                    </select>-->
<!--                </div>-->

<!--                &lt;!&ndash; Month Filter &ndash;&gt;-->
<!--                <div class="col-md-2">-->
<!--                    <label for="month" class="form-label">Month</label>-->
<!--                    <select class="form-select" id="month" name="month" onchange="applyFilters()">-->
<!--                        <option value="" th:selected="${param.month == null or param.month[0] == ''}">All</option>-->
<!--                        <option th:each="monthOption : ${availableMonths}"-->
<!--                                th:value="${monthOption}"-->
<!--                                th:text="${#temporals.format(#temporals.create(2024, #numbers.formatInteger(monthOption.split('-')[1], 0), 1), 'MMMM yyyy')}"-->
<!--                                th:selected="${param.month != null and param.month[0] == monthOption}">-->
<!--                        </option>-->
<!--                    </select>-->
<!--                </div>-->

<!--                &lt;!&ndash; Year Filter &ndash;&gt;-->
<!--                <div class="col-md-2">-->
<!--                    <label for="year" class="form-label">Year</label>-->
<!--                    <select class="form-select" id="year" name="year" onchange="applyFilters()">-->
<!--                        <option value="" th:selected="${param.year == null or param.year[0] == ''}">All</option>-->
<!--                        <option th:each="yearOption : ${availableYears}"-->
<!--                                th:value="${yearOption}"-->
<!--                                th:text="${yearOption}"-->
<!--                                th:selected="${param.year != null and param.year[0] == yearOption.toString()}">-->
<!--                        </option>-->
<!--                    </select>-->
<!--                </div>-->

<!--                &lt;!&ndash; Clear Filters Button &ndash;&gt;-->
<!--                <div class="col-md-1 d-flex align-items-end">-->
<!--                    <button type="button" class="btn btn-outline-secondary w-100" onclick="clearFilters()">-->
<!--                        <i class="fas fa-times"></i>-->
<!--                    </button>-->
<!--                </div>-->
<!--            </div>-->
<!--        </form>-->

<!--        &lt;!&ndash; Quick Filter Buttons (keeping the original style) &ndash;&gt;-->
<!--        <div class="mt-3">-->
<!--            <div class="btn-group" role="group" aria-label="Quick filters">-->
<!--                <a href="/games?status=SCHEDULED" class="btn btn-outline-info"-->
<!--                   th:classappend="${param.status != null and param.status[0] == 'SCHEDULED'} ? ' active' : ''">-->
<!--                    <i class="fas fa-calendar-alt me-2"></i>Scheduled-->
<!--                </a>-->
<!--                <a href="/games?status=FINISHED" class="btn btn-outline-success"-->
<!--                   th:classappend="${param.status != null and param.status[0] == 'FINISHED'} ? ' active' : ''">-->
<!--                    <i class="fas fa-flag-checkered me-2"></i>Finished-->
<!--                </a>-->
<!--                <a href="/games/add" class="btn btn-outline-primary">-->
<!--                    <i class="fas fa-plus me-2"></i>Add Game-->
<!--                </a>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Results Count &ndash;&gt;-->
<!--    <div class="d-flex justify-content-between align-items-center mb-3">-->
<!--        <div>-->
<!--            <span class="text-muted">-->
<!--                Showing <strong th:text="${games.size()}">0</strong> games-->
<!--                <span th:if="${param.status != null and param.status[0] != ''}"-->
<!--                      th:text="'(Status: ' + ${param.status[0]} + ')'"></span>-->
<!--                <span th:if="${param.clubId != null and param.clubId[0] != ''}"-->
<!--                      th:text="'(Club: ' + ${selectedClub?.name ?: 'Unknown'} + ')'"></span>-->
<!--                <span th:if="${param.matchDay != null and param.matchDay[0] != ''}"-->
<!--                      th:text="'(Match Day: ' + ${param.matchDay[0]} + ')'"></span>-->
<!--                <span th:if="${param.month != null and param.month[0] != ''}"-->
<!--                      th:text="'(Month: ' + ${param.month[0]} + ')'"></span>-->
<!--            </span>-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Games Table &ndash;&gt;-->
<!--    <div class="card">-->
<!--        <div class="card-header">-->
<!--            <h5>Games</h5>-->
<!--        </div>-->
<!--        <div class="card-body">-->
<!--            <div th:if="${games.empty}" class="text-center text-muted py-4">-->
<!--                <i class="fas fa-search fa-3x mb-3 text-muted"></i>-->
<!--                <p>No games found matching your criteria.</p>-->
<!--                <a href="/games" class="btn btn-outline-primary">Show All Games</a>-->
<!--            </div>-->

<!--            <div th:unless="${games.empty}">-->
<!--                <div class="table-responsive">-->
<!--                    <table class="table table-striped table-hover">-->
<!--                        <thead class="table-dark">-->
<!--                        <tr>-->
<!--                            <th>-->
<!--                                <a href="#" onclick="sortBy('date')" class="text-white text-decoration-none">-->
<!--                                    Date <i class="fas fa-sort"></i>-->
<!--                                </a>-->
<!--                            </th>-->
<!--                            <th>Home Team</th>-->
<!--                            <th>Away Team</th>-->
<!--                            <th>Result</th>-->
<!--                            <th>Status</th>-->
<!--                            <th>Stadium</th>-->
<!--                            <th>Match Day</th>-->
<!--                        </tr>-->
<!--                        </thead>-->
<!--                        <tbody>-->
<!--                        <tr th:each="game : ${games}">-->
<!--                            <td th:text="${#temporals.format(game.gameDate, 'dd/MM/yyyy')}"></td>-->
<!--                            <td>-->
<!--                                <strong>-->
<!--                                    <a th:href="@{/games/club/{id}(id=${game.homeClub.id})}"-->
<!--                                       th:text="${game.homeClub.name}"-->
<!--                                       class="text-decoration-none"></a>-->
<!--                                </strong>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <strong>-->
<!--                                    <a th:href="@{/games/club/{id}(id=${game.awayClub.id})}"-->
<!--                                       th:text="${game.awayClub.name}"-->
<!--                                       class="text-decoration-none"></a>-->
<!--                                </strong>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <span th:if="${game.finished}"-->
<!--                                      th:text="${game.result}"-->
<!--                                      class="badge bg-secondary"></span>-->
<!--                                <span th:unless="${game.finished}"-->
<!--                                      class="text-muted">vs</span>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <span th:if="${game.finished}"-->
<!--                                      class="badge bg-success">Finished</span>-->
<!--                                <span th:unless="${game.finished}"-->
<!--                                      class="badge bg-info">Scheduled</span>-->
<!--                            </td>-->
<!--                            <td th:text="${game.stadiumName ?: '-'}"></td>-->
<!--                            <td>-->
<!--                                <a th:href="@{/games/match-day/{id}(id=${game.matchDay.id})}"-->
<!--                                   th:text="'Day ' + ${game.matchDay.number}"-->
<!--                                   class="btn btn-sm btn-outline-primary"></a>-->
<!--                            </td>-->
<!--                        </tr>-->
<!--                        </tbody>-->
<!--                    </table>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>-->

<!--<script>-->
<!--    function applyFilters() {-->
<!--        document.getElementById('filterForm').submit();-->
<!--    }-->

<!--    function clearFilters() {-->
<!--        // Clear all select elements-->
<!--        const selects = document.querySelectorAll('#filterForm select');-->
<!--        selects.forEach(select => select.selectedIndex = 0);-->

<!--        // Redirect to clean URL-->
<!--        window.location.href = '/games';-->
<!--    }-->

<!--    function sortBy(column) {-->
<!--        const url = new URL(window.location.href);-->
<!--        const currentSort = url.searchParams.get('sort');-->
<!--        const currentOrder = url.searchParams.get('order');-->

<!--        if (currentSort === column && currentOrder === 'asc') {-->
<!--            url.searchParams.set('order', 'desc');-->
<!--        } else {-->
<!--            url.searchParams.set('order', 'asc');-->
<!--        }-->
<!--        url.searchParams.set('sort', column);-->

<!--        window.location.href = url.toString();-->
<!--    }-->

<!--    // Preserve filter state in URL-->
<!--    window.addEventListener('load', function() {-->
<!--        const params = new URLSearchParams(window.location.search);-->

<!--        // Set form values from URL parameters-->
<!--        for (let [key, value] of params) {-->
<!--            const element = document.getElementById(key);-->
<!--            if (element) {-->
<!--                element.value = value;-->
<!--            }-->
<!--        }-->
<!--    });-->
<!--</script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle}">Games Calendar</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/index_map.css">
    <link rel="stylesheet" href="/css/index_navbar.css">
    <style>
        .filter-section {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .result-win { background-color: #28a745 !important; }
        .result-lose { background-color: #dc3545 !important; }
        .result-draw { background-color: #6c757d !important; }
    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-dark shadow-sm">
    <div class="container">
        <a class="navbar-brand d-flex align-items-center fw-bold text-primary" href="/">
            <img src="/images/logos/pl-logo-dark.svg" alt="Football Stats Logo" class="me-2">
            <span th:text="${seasonName}">Premier League</span>
        </a>
        <div class="navbar-nav ms-auto">
            <a class="nav-link" href="/action"><i class="fas fa-plus me-1"></i>Player Action</a>
            <a class="nav-link" href="/players/statistics"><i class="fas fa-chart-bar me-1"></i>Players Statistics</a>
            <a class="nav-link" href="/games"><i class="fas fa-futbol me-1"></i>Games Management</a>
            <a class="nav-link" href="/games/add"><i class="fas fa-plus me-1"></i>Game</a>
            <a class="nav-link" href="/league"><i class="fas fa-trophy me-1"></i>League Table</a>
            <a class="nav-link" href="/cities"><i class="fas fa-map-marked-alt me-1"></i>Premier League Map</a>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <h1 class="mb-4" th:text="${pageTitle}">Games Management</h1>

    <!-- Stats Cards -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card text-white bg-success">
                <div class="card-body">
                    <h5 class="card-title">Finished Games</h5>
                    <p class="card-text display-4" th:text="${finishedCount}">0</p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card text-white bg-info">
                <div class="card-body">
                    <h5 class="card-title">Scheduled Games</h5>
                    <p class="card-text display-4" th:text="${scheduledCount}">0</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Filter Section -->
    <div class="filter-section">
        <h5 class="mb-3"><i class="fas fa-filter me-2"></i>Filter & Search Games</h5>
        <form method="get" action="/games" id="filterForm">
            <div class="row g-3">
                <!-- Status Filter -->
                <div class="col-md-2">
                    <label for="status" class="form-label">Status</label>
                    <select class="form-select" id="status" name="status" onchange="applyFilters()">
                        <option value="" th:selected="${param.status == null or param.status[0] == ''}">All</option>
                        <option value="SCHEDULED" th:selected="${param.status != null and param.status[0] == 'SCHEDULED'}">Scheduled</option>
                        <option value="FINISHED" th:selected="${param.status != null and param.status[0] == 'FINISHED'}">Finished</option>
                    </select>
                </div>

                <!-- Club Filter -->
                <div class="col-md-3">
                    <label for="clubId" class="form-label">Club</label>
                    <select class="form-select" id="clubId" name="clubId" onchange="applyFilters()">
                        <option value="" th:selected="${param.clubId == null or param.clubId[0] == ''}">All Clubs</option>
                        <option th:each="club : ${clubs}"
                                th:value="${club.id}"
                                th:text="${club.name}"
                                th:selected="${param.clubId != null and param.clubId[0] == club.id.toString()}">
                        </option>
                    </select>
                </div>

                <!-- Match Day Filter -->
                <div class="col-md-2">
                    <label for="matchDay" class="form-label">Match Day</label>
                    <select class="form-select" id="matchDay" name="matchDay" onchange="applyFilters()">
                        <option value="" th:selected="${param.matchDay == null or param.matchDay[0] == ''}">All</option>
                        <option th:each="day : ${#numbers.sequence(1, 38)}"
                                th:value="${day}"
                                th:text="'Day ' + ${day}"
                                th:selected="${param.matchDay != null and param.matchDay[0] == day.toString()}">
                        </option>
                    </select>
                </div>

                <!-- Month Filter -->
                <div class="col-md-2">
                    <label for="month" class="form-label">Month</label>
                    <select class="form-select" id="month" name="month" onchange="applyFilters()">
                        <option value="" th:selected="${param.month == null or param.month[0] == ''}">All</option>
                        <option th:each="monthOption : ${availableMonths}"
                                th:value="${monthOption}"
                                th:text="${#temporals.format(#temporals.create(2024, #numbers.formatInteger(monthOption.split('-')[1], 0), 1), 'MMMM yyyy')}"
                                th:selected="${param.month != null and param.month[0] == monthOption}">
                        </option>
                    </select>
                </div>

                <!-- Year Filter -->
                <div class="col-md-2">
                    <label for="year" class="form-label">Year</label>
                    <select class="form-select" id="year" name="year" onchange="applyFilters()">
                        <option value="" th:selected="${param.year == null or param.year[0] == ''}">All</option>
                        <option th:each="yearOption : ${availableYears}"
                                th:value="${yearOption}"
                                th:text="${yearOption}"
                                th:selected="${param.year != null and param.year[0] == yearOption.toString()}">
                        </option>
                    </select>
                </div>

                <!-- Clear Filters Button -->
                <div class="col-md-1 d-flex align-items-end">
                    <button type="button" class="btn btn-outline-secondary w-100" onclick="clearFilters()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </form>

        <!-- Quick Filter Buttons (keeping the original style) -->
        <div class="mt-3">
            <div class="btn-group" role="group" aria-label="Quick filters">
                <a href="/games?status=SCHEDULED" class="btn btn-outline-info"
                   th:classappend="${param.status != null and param.status[0] == 'SCHEDULED'} ? ' active' : ''">
                    <i class="fas fa-calendar-alt me-2"></i>Scheduled
                </a>
                <a href="/games?status=FINISHED" class="btn btn-outline-success"
                   th:classappend="${param.status != null and param.status[0] == 'FINISHED'} ? ' active' : ''">
                    <i class="fas fa-flag-checkered me-2"></i>Finished
                </a>
                <a href="/games/add" class="btn btn-outline-primary">
                    <i class="fas fa-plus me-2"></i>Add Game
                </a>
            </div>
        </div>
    </div>

    <!-- Results Count -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
            <span class="text-muted">
                Showing <strong th:text="${games.size()}">0</strong> games
                <span th:if="${param.status != null and param.status[0] != ''}"
                      th:text="'(Status: ' + ${param.status[0]} + ')'"></span>
                <span th:if="${param.clubId != null and param.clubId[0] != ''}"
                      th:text="'(Club: ' + ${selectedClub?.name ?: 'Unknown'} + ')'"></span>
                <span th:if="${param.matchDay != null and param.matchDay[0] != ''}"
                      th:text="'(Match Day: ' + ${param.matchDay[0]} + ')'"></span>
                <span th:if="${param.month != null and param.month[0] != ''}"
                      th:text="'(Month: ' + ${param.month[0]} + ')'"></span>
            </span>
        </div>
    </div>

    <!-- Games Table -->
    <div class="card">
        <div class="card-header">
            <h5>Games</h5>
        </div>
        <div class="card-body">
            <div th:if="${games.empty}" class="text-center text-muted py-4">
                <i class="fas fa-search fa-3x mb-3 text-muted"></i>
                <p>No games found matching your criteria.</p>
                <a href="/games" class="btn btn-outline-primary">Show All Games</a>
            </div>

            <div th:unless="${games.empty}">
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-dark">
                        <tr>
                            <th>
                                <a href="#" onclick="sortBy('date')" class="text-white text-decoration-none">
                                    Date <i class="fas fa-sort"></i>
                                </a>
                            </th>
                            <th>Home Team</th>
                            <th>Away Team</th>
                            <th>Result</th>
                            <th>Status</th>
                            <th>Stadium</th>
                            <th>Match Day</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="game : ${games}">
                            <td th:text="${#temporals.format(game.gameDate, 'dd/MM/yyyy')}"></td>
                            <td>
                                <strong>
                                    <a th:href="@{/games/club/{id}(id=${game.homeClub.id})}"
                                       th:text="${game.homeClub.name}"
                                       class="text-decoration-none"></a>
                                </strong>
                            </td>
                            <td>
                                <strong>
                                    <a th:href="@{/games/club/{id}(id=${game.awayClub.id})}"
                                       th:text="${game.awayClub.name}"
                                       class="text-decoration-none"></a>
                                </strong>
                            </td>
                            <td>
                                <span th:if="${game.finished}"
                                      th:text="${game.result}"
                                      class="badge bg-secondary"></span>
                                <span th:unless="${game.finished}"
                                      class="text-muted">vs</span>
                            </td>
                            <td>
                                <span th:if="${game.finished}"
                                      class="badge bg-success">Finished</span>
                                <span th:unless="${game.finished}"
                                      class="badge bg-info">Scheduled</span>
                            </td>
                            <td th:text="${game.stadiumName ?: '-'}"></td>
                            <td>
                                <a th:href="@{/games/match-day/{id}(id=${game.matchDay.id})}"
                                   th:text="'Day ' + ${game.matchDay.number}"
                                   class="btn btn-sm btn-outline-primary"></a>
                            </td>
                            <td>
                                <div class="btn-group" role="group">
                                    <a th:if="${!game.finished}"
                                       th:href="@{/games/edit/{id}(id=${game.id})}"
                                       class="btn btn-sm btn-outline-success"
                                       title="Update Result">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                    <a th:if="${game.finished}"
                                       th:href="@{/games/edit/{id}(id=${game.id})}"
                                       class="btn btn-sm btn-outline-primary"
                                       title="Edit Result">
                                        <i class="fas fa-pencil-alt"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    function applyFilters() {
        document.getElementById('filterForm').submit();
    }

    function clearFilters() {
        // Clear all select elements
        const selects = document.querySelectorAll('#filterForm select');
        selects.forEach(select => select.selectedIndex = 0);

        // Redirect to clean URL
        window.location.href = '/games';
    }

    function sortBy(column) {
        const url = new URL(window.location.href);
        const currentSort = url.searchParams.get('sort');
        const currentOrder = url.searchParams.get('order');

        if (currentSort === column && currentOrder === 'asc') {
            url.searchParams.set('order', 'desc');
        } else {
            url.searchParams.set('order', 'asc');
        }
        url.searchParams.set('sort', column);

        window.location.href = url.toString();
    }

    // Preserve filter state in URL
    window.addEventListener('load', function() {
        const params = new URLSearchParams(window.location.search);

        // Set form values from URL parameters
        for (let [key, value] of params) {
            const element = document.getElementById(key);
            if (element) {
                element.value = value;
            }
        }
    });
</script>
</body>
</html>